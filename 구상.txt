[커밋 내용]
서브젝트 라우트 수정
파이썬과 연결 - 시트체커의 검색 기능 구현
코스로 이름바꾸기
코스 페이지 수정
코스 저장할 db구현
코스 db에서 찾고 가져와서 사용자 등록, 없으면 크롤링

[당장 해야할 거]

코스 페이지에 들어가면 과목들 뜨게 하기
코스 페이지에서 과목 삭제할 수 있게하기
과목코드 대소문자 구분 없게 하기

[나중에 해야할거]
몇초 있어도 결과 안오면 오류 떴다고 표시
어드민 페이지에 과목 삭제 버튼 추가하고 삭제시키고 db관련 작업 잘 작동하는지 보기
회원탈퇴나 비번 변경시 세션 삭제 후 signup 페이지
과목이름 적당히만 입력해도 찾을 수 있게끔?

[collection - auto-course-seat-alert-session]
session

[collection - auto-course-seat-alert]
users {
    _id
    id
    password
    isAdmin
    push_notification_id: ''
    applied_subject: [{
        subject: ObjectId(subject_to_alert->id), seat_type: 'self'/'other'
    }, ...]
}

courses { //과목
    _id
    name: '캡스톤'
    code: 'CLT0085-1' //분반까지
    alertedSelf: boolean,
    alertedOther: boolean,
    applicant = { [{
        user: ObjectId(users->id),
        push_notification_id: '',
        seat_type: ''
    },{},...] }
}

/*application {
    id
    subject_id: ObjectId(subject_to_alert - doc id)
    user_id: ObjectId(users - doc id)
    push_notification_id
}*/

[인지사항]
csrf로 일단 구현해놓고 double csrf로 교체
자동 로그인 좀이따 구현

[페이지]
1. 회원가입 - 특수문자X
2. 로그인
3. 메인 - 내가 신청한 과목(+ 옆에 삭제 버튼), 모두 삭제, 과목 추가 버튼(과목 이름과 과목의 대상학년, 과목 코드, 자과/타과 입력)
5. 설정 - 알림 횟수, 비밀번호 변경(세션 삭제!)

[구현]
-신청 과목 추가(py)
1. 전남대 수업 목록 사이트에서 전달 받은 수업 정보로 수업을 검색
2. 수업 존재 ?
 (
 신청 개수 확인(신청 과목 배열 길이)
  내가 신청한 수업인지 확인
   내가 신청한 수업 리스트에 추가
   알림 보낼 수업 리스트에 없을 경우 수업 추가
   수업의 신청자 목록에 추가
   추가 완료 alert창) : 과목 없음 alert창;

-신청 과목 삭제
applicant.user 중에 같은 거 찾아서 삭제, applicant 배열 길이 0일 경우 그 문서 삭제
user의 신청 과목에서 과목 삭제


-초기화
applicant.user 중에 같은 거 찾아서 삭제, applicant 배열 길이 0일 경우 그 문서 삭제 - 모든 과목에 대해
user 신청 과목 전체 삭제


-알림(py)
1. subject_to_alert의 모든 document를 가져옴
2. 스레드에게 (과목 수 / 스레드 수) 만큼의 과목을 전달해줌
3. 스레드는 웹페이지에게 (자신이 맡은 과목 수 / 웹페이지 수)만큼의 과목을 전달해줌 - 인덱싱
4. 여석이 있는지 확인함
5-1. 여석 없을 경우 : 
alerted ? (과목 사라짐 푸시 알림, alerted: false) : return ;
5-2. 여석 있을 경우 : 
alerted ? (return) : (과목 생김 푸시 알림) ;
푸시 알람 id를 얻기 위해 users 문서를 참조하지 않게 하기 위해(비효율적) 신청자 문서에도 푸시 알람 id 넣기 - 대신 푸시 알림 id가 변경됐을 경우 최신화 잘해야 함


[해결]
과목 이름 유효성 검증
파이썬과 연결하는법 배우기
파이썬 입출력 인코딩 형식 잘못된거 같은데 고치기
과목 찾는 파이썬 구현 //아이디를 전달하고, 파이썬은 받아서 다시 보내서, 아이디를 이용해서 사용자에게 전달? - 동기일 수가 없음 - 따라서 그렇게 해야할듯? - db에 따로 저장하기에도 관리가 귀찮아지니까 저대로하면 로컬에서 데이터가 분실돼도 처리가 까다롭지 않음 - 크롤링 요청을 프로미스로 구현해서 아이디를 전달하지 않아도 되게 함
과목 추가 - 플래싱 구현 -> 말고 ajax로 구현
존재하지 않는 강의 이름을 조회했을 때 오류가 뜨는거 해결
course-controllers.py 오류처리(찾은 과목 없어도 이전 과목 개수가 그대로 유지되는 현상때문에 과목 수가 없는 걸 인지하지 못했던 걸 해결)
서브젝 컨트롤러 - 유저 과목 보고 서브젝에서 과목 가져오기 -> 먼저 subject 모델 추가 - 과목에 신청자만 넣고 과목에서 유저의 신청 과목을 찾을 수 있게 해놓음 - 시간은 좀 더 걸림
서버 시작되고 과목 추가 버튼을 2번 눌러야 그 이후부터 정상 작동하는거 수정하기 - 처음에 과목 조회하고나서 바로 과목 개수를 확인해서 0개라 제대로 작동을 안한건가? - 애초에 0개면 작동을 안하게 만들어놨어서 아닌거 같은데 - 일단 해결됨 찾은 과목 없어도 이전 과목 개수가 그대로 유지되는 현상 고쳤는데 같이 해결됨